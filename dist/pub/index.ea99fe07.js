var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},i={},o=e.parcelRequire87e6;null==o&&((o=function(e){if(e in t)return t[e].exports;if(e in i){var o=i[e];delete i[e];var n={id:e,exports:{}};return t[e]=n,o.call(n.exports,n,n.exports),n.exports}var a=Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){i[e]=t},e.parcelRequire87e6=o);var n=o("hlpVk"),a=o("hEh8e");function c(e,t,i){(0,a.Member).call(this,e),this.cameraList=t,this.audioList=i}function l(e,t){navigator.mediaDevices.enumerateDevices().then(i=>{let o=i.filter(e=>e.kind===t);o.forEach(t=>{let i=document.createElement("option");i.value=t.deviceId,i.text=t.label,e.appendChild(i)})}).catch(e=>{console.log(e.name+": "+e.message)})}c.prototype=Object.create(a.Member.prototype),c.prototype.constructor=c,Object.assign(c.prototype,{previewVideo:async function(e){this.video=await (0,n.SkyWayStreamFactory).createCameraVideoStream({deviceId:this.cameraList.value}),this.video.attach(e),await e.play()},publishVideo:function(){this.myInfo.publish(this.video).then(()=>{console.log("publish success!")})},previewAudio:async function(){this.mic=await (0,n.SkyWayStreamFactory).createMicrophoneAudioStream({deviceId:this.audioList.value})},publishAudio:function(){this.myInfo.publish(this.mic).then(()=>{console.log("publish success!")})}});const d=document.getElementById("my-id"),s=document.getElementById("local-video"),r=document.getElementById("camera-list"),u=document.getElementById("audio-list"),m=document.getElementById("list-button"),h=document.getElementById("publish-video-button"),p=document.getElementById("publish-audio-button"),y=document.getElementById("url");(async()=>{let e=new URLSearchParams(window.location.search),t=new c(e.get("room"),r,u);await t.initMyContext(e.get("key")),d.textContent=t.myInfo.id;var i="localhost:1234/sub/?room="+e.get("room")+"&key="+e.get("key")+"&id="+t.myInfo.id;y.textContent=i,m.onclick=()=>{l(u,"audioinput"),l(r,"videoinput")},h.onclick=async()=>{await t.publishVideo()},p.onclick=async()=>{await t.publishAudio()},r.onchange=async()=>{await t.previewVideo(s)},u.onchange=async()=>{await t.previewAudio()}})();
//# sourceMappingURL=index.ea99fe07.js.map
